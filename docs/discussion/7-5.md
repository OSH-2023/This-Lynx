# 7-5

小步更快地跑，第二天

解决了使用perf时执行PySpark异常的问题
发现cargo run --release在1.70.0后版本无法正常编译一个重要包"serde_traitobject"
查询git PR发现解决方案如下
```sh
rustup install nightly-2023-04-17
rustup default nightly-2023-04-17
rustup component add rust-src --toolchain nightly-2023-04-17
rustup override set nightly-2023-04-17-x86_64-unknown-linux-gnu
```
https://github.com/alecmocatta/serde_traitobject/issues/35

使用cargo run --release 可以大大加快程序运行速度
在测试程序编写时传引用而非直接传参数可以节省1s多的函数调用开销
使用条件编译将hdrs_valid设置为feature,避免未安装java/hadoop的用户编译失败